(this["webpackJsonpcourse-ilink"]=this["webpackJsonpcourse-ilink"]||[]).push([[0],{109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){},254:function(e,t,n){"use strict";n.r(t);var a,c=n(0),s=n.n(c),r=n(31),i=n.n(r),o=(n(109),n(22));n(110);!function(e){e.SCREEN_LOGIN="/login",e.SCREEN_SIGNUP="/signup",e.SCREEN_CHAT="/chat"}(a||(a={}));var l,u=n(11),d=n(9),h=n.n(d),j=(n(111),n(1)),p=function(e){var t=e.theme;return Object(j.jsx)("img",{className:h()("logo","logo_".concat(t)),src:"/image/logo.svg"})},m=n(8),b=n.n(m),f=n(13),g=n(10),O=n(59),x=n(20),_=x.b().shape({login:x.d().required("The field must be filled").min(2,"Must be more than 4 characters").max(50,"Must be no more than 50 characters"),password:x.d().required("The field must be filled").min(6,"Must be more than 6 characters"),captcha:x.d().required("The field must be filled").min(5,"Must be 5 characters").max(5,"Must be 5 characters")}),v=x.b().shape({login:x.d().required("The field must be filled").max(50,"Must be no more than 50 characters"),password:x.d().required("The field must be filled"),password_confirm:x.d().required("The field must be filled").oneOf([x.c("password"),null],"Password mismatch"),name:x.d().required("The field must be filled").max(50,"Must be no more than 50 characters"),gender_id:x.a().integer().required("The field must be filled"),captcha:x.d().required("The field must be filled").min(5,"Must be 5 characters").max(5,"Must be 5 characters")}),N=n(14),w=n(60),C=(n(214),function(e){var t=e.value,n=e.type,a=void 0===n?"text":n,s=e.placeholder,r=e.required,i=e.focused,o=e.disabled,l=void 0!==o&&o,u=e.tabIndex,d=e.autocomplete,p=e.name,m=e.onChange,b=void 0===m?function(){}:m,f=e.onFocus,g=void 0===f?function(){}:f,O=e.onBlur,x=void 0===O?function(){}:O,_=e.theme,v={onFocus:Object(c.useCallback)((function(){return g()}),[g]),onBlur:Object(c.useCallback)((function(){return x()}),[x])};return Object(j.jsx)("div",{className:"input",children:Object(j.jsx)("input",{className:h()("input__input",_?"input__input_".concat(_):""),value:t,type:a,placeholder:s,name:p,tabIndex:u,disabled:l,required:r,autoFocus:i,autoComplete:d?"on":"off",onChange:b,onFocus:v.onFocus,onBlur:v.onBlur})})}),y=(n(215),["description","theme","errorText","inValidInput","onBlur"]),S=function(e){var t=e.description,n=e.theme,a=e.errorText,s=e.inValidInput,r=e.onBlur,i=void 0===r?function(){}:r,o=Object(w.a)(e,y),l=Object(c.useState)(!1),u=Object(g.a)(l,2),d=u[0],p=u[1],m={onBlur:Object(c.useCallback)((function(){return p(!1),i()}),[i])};return Object(j.jsxs)("div",{className:h()("input-form",n?"input-form_".concat(n):""),children:[Object(j.jsx)("span",{className:"input-form__description",children:t}),Object(j.jsx)("label",{className:h()("input-form__wrapper",d?"input-form__wrapper_typing":"",s?"input-form__wrapper_error":""),children:Object(j.jsx)(C,Object(N.a)({onFocus:function(){p(!0)},onBlur:m.onBlur,theme:"form"},o))}),s&&Object(j.jsx)("div",{className:"input-form_error__text",children:a})]})},k=(n(216),function(e){var t=e.children,n=e.type,a=e.disabled,c=e.onClick,s=void 0===c?function(){}:c,r=e.theme;return Object(j.jsx)("button",{onClick:function(e){return s(e)},disabled:a,type:n,className:h()("button",r?"button_".concat(r):""),children:t})}),I=n.p+"static/media/reset.4a978d34.svg",F=(n(217),function(e){var t=e.src,n=e.onClick;return Object(j.jsxs)("div",{className:"captcha",children:[Object(j.jsx)("img",{className:"captcha__img",src:t,alt:"captcha"}),Object(j.jsx)(k,{theme:"reset-captcha",type:"button",onClick:n,children:Object(j.jsx)("img",{className:"captcha__resetImg",src:I})})]})}),E=(n(218),["src","onClick"]),T=function(e){var t=e.src,n=e.onClick,a=Object(w.a)(e,E);return Object(j.jsxs)("div",{className:"security-code",children:[Object(j.jsx)(S,Object(N.a)({},a)),Object(j.jsx)(F,{src:t,onClick:n})]})},B=(n(219),function(){return Object(j.jsx)("div",{className:"loading",children:Object(j.jsx)("img",{className:"loading__img",src:"/image/loading.svg"})})}),M=n(5),L=new function e(){var t=this;Object(M.a)(this,e),this._apiBase=void 0,this.postRequest=function(){var e=Object(f.a)(b.a.mark((function e(n,a){var c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(n),{method:"POST",body:a,headers:{"Access-Control-Allow-Origin":"*"},credentials:"same-origin"});case 2:if(!(c=e.sent).ok){e.next=8;break}return e.next=6,c.json();case 6:return s=e.sent,e.abrupt("return",s);case 8:return console.log("Error: ".concat(c.status," ").concat(c.statusText)),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.postSignUp=function(){var e=Object(f.a)(b.a.mark((function e(n){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("login",n.login),a.append("password",n.password),a.append("password_confirm",n.password_confirm),a.append("name",n.name),a.append("gender_id","".concat(n.gender_id)),a.append("captcha",n.captcha),e.next=9,t.postRequest("/auth/register",a);case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.postLogin=function(){var e=Object(f.a)(b.a.mark((function e(n){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("login",n.login),a.append("password",n.password),a.append("captcha",n.captcha),e.next=6,t.postRequest("/auth/login",a);case 6:return(c=e.sent)&&localStorage.setItem("connect_key",c),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._apiBase="http://109.194.37.212:93/api"},R=new function e(){var t=this;Object(M.a)(this,e),this._apiCaptcha=void 0,this.update=Object(f.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t._apiCaptcha);case 2:return n=e.sent,e.abrupt("return",n.url);case 4:case"end":return e.stop()}}),e)}))),this._apiCaptcha="http://109.194.37.212:93//api/auth/captcha"},U=(n(220),function(){var e=Object(c.useState)(!1),t=Object(g.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),i=Object(g.a)(r,2),o=i[0],l=i[1],d=Object(c.useState)(""),h=Object(g.a)(d,2),p=h[0],m=h[1],x=Object(u.g)();Object(c.useEffect)((function(){N()}),[]);var v=Object(O.a)({initialValues:{login:"",password:"",captcha:""},onSubmit:function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),l(!0),e.next=4,L.postLogin(t);case 4:if(!(n=e.sent)){e.next=8;break}return x.push(a.SCREEN_CHAT),e.abrupt("return");case 8:s(!n),l(!1),alert("Something went wrong"),N();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validationSchema:_}),N=function(){var e=Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(""),e.next=3,R.update();case 3:t=e.sent,m(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"form-login",children:Object(j.jsxs)("form",{className:"form-login__form",onSubmit:v.handleSubmit,children:[Object(j.jsxs)("div",{className:"form-login__inputs",children:[Object(j.jsx)(S,{onChange:function(e){v.handleChange(e),s(!1)},inValidInput:v.touched.login&&Boolean(v.errors.login),value:v.values.login,name:"login",description:"User name",placeholder:"Input user name",type:"text",errorText:v.errors.login}),Object(j.jsx)(S,{onChange:v.handleChange,inValidInput:v.touched.password&&Boolean(v.errors.password),value:v.values.password,name:"password",description:"Password",placeholder:"Input password",type:"password",errorText:v.errors.password}),Object(j.jsx)("div",{className:"form-login__security-code",children:Object(j.jsx)(T,{onChange:v.handleChange,onClick:N,inValidInput:v.touched.captcha&&Boolean(v.errors.captcha),value:v.values.captcha,name:"captcha",theme:"last-input",description:"Security code",placeholder:"Security code",type:"text",errorText:v.errors.captcha,src:p})})]}),Object(j.jsxs)("div",{className:"form-login__buttons",children:[Object(j.jsx)(k,{disabled:n,theme:"submit-auth",type:"submit",children:"Log in"}),Object(j.jsx)(k,{onClick:function(){x.push(a.SCREEN_SIGNUP)},theme:"nav-auth",type:"button",children:"Registration"})]}),o?Object(j.jsx)(B,{}):""]})})}),q=(n(226),function(){return Object(j.jsxs)("div",{className:"login",children:[Object(j.jsx)("div",{className:"login__left",children:Object(j.jsxs)("div",{className:"login__left-content",children:[Object(j.jsxs)("div",{className:"login__header",children:[Object(j.jsx)(p,{theme:"login"}),Object(j.jsxs)("h1",{className:"login__header-title",children:["Wellcome to ",Object(j.jsx)("span",{className:"_color-blue",children:"Chatty"}),Object(j.jsx)("span",{className:"_color-light-blue",children:"!"})]}),Object(j.jsx)("h2",{className:"login__header-description",children:"Please, autorize yourself"})]}),Object(j.jsx)(U,{})]})}),Object(j.jsx)("div",{className:"login__right"})]})}),V=(n(227),function(e){var t=e.focusChat;return Object(j.jsxs)("div",{className:h()("chat-header",t?"chat-header_focus-chat":""),children:[Object(j.jsx)(p,{theme:"chatHeader"}),Object(j.jsx)("div",{className:"chat-header__icon",children:Object(j.jsx)("img",{className:"chat-header__icon-img",src:"/image/icon/iconChatHeader.svg"})})]})}),A=(n(228),function(e){var t=e.theme,n=e.gender;return Object(j.jsx)("img",{className:h()("icon-profile","icon-profile_".concat(t)),src:"/image/icon/iconProfile".concat(n,".svg")})}),P=(n(229),function(e){var t=e.name,n=e.gender,c=e.lastMsg,s=e.lastMsgYou,r=e.select,i=e.id,l=e.onClick;return Object(j.jsx)(o.b,{onClick:l,to:a.SCREEN_CHAT+"/".concat(i),activeClassName:"_select",children:Object(j.jsxs)("div",{className:h()("chat-contact-item",r?"chat-contact-item_select":""),children:[Object(j.jsx)(A,{gender:n}),Object(j.jsxs)("div",{className:"chat-contact-item__description",children:[Object(j.jsx)("h3",{className:"chat-contact-item__name",children:t}),c&&Object(j.jsxs)("p",{className:"chat-contact-item__lastMsg",children:[s&&Object(j.jsx)("span",{className:"chat-contact-item__lastMsg_you",children:"You: "}),function(e){return e.length>20?e.substr(0,10)+"...":e}(c)]})]})]})})}),D=n(6),G=n(7),H=function(){function e(){Object(M.a)(this,e),this.allUsers=[],Object(G.d)(this)}return Object(D.a)(e,[{key:"saveMessage",value:function(e,t){this.allUsers=this.allUsers.map((function(n){return n.id===t&&n.dialogue.unshift(e),n}))}},{key:"initialAllUsers",value:function(e){this.allUsers=e.map((function(e,t){return{name:e.name,gender:e.gender,id:String(t),dialogue:[]}}))}}]),e}(),W=new H,z=(n(230),function(e){var t,n=e.onClick,a=e.loading,c=Object(G.h)(W.allUsers),s="undefined"!==typeof(t=c)&&t.length>0?t.map((function(e){var t=e.name,a=e.gender,c=e.id,s=e.dialogue,r=s.length>0?s[0]:"";if(e.name&&e.gender)return Object(j.jsx)(P,{onClick:n,id:c,name:t,gender:a,lastMsg:r?r.text:"",lastMsgYou:!!r&&r.your},c)})):Object(j.jsxs)("div",{className:"chat-list-contact__no-contact",children:[Object(j.jsx)("img",{className:"chat-list-contact__no-contact-img",src:"/image/noContact.svg"}),Object(j.jsx)("p",{className:"chat-list-contact__no-contact-text",children:"There is no other users yet"})]});return Object(j.jsx)("div",{className:"chat-list-contact",children:a?Object(j.jsx)(B,{}):s})}),Y=(n(231),function(e){var t=e.children,n=e.yourMsg;return Object(j.jsx)("div",{className:h()("message",n?"message_your-msg":"message_some-else-msg"),children:Object(j.jsx)("div",{className:"message__text",children:t})})}),J=n(38),K=new(function(){function e(){Object(M.a)(this,e),this.value="",Object(G.d)(this)}return Object(D.a)(e,[{key:"onChange",value:function(e){this.value=e.target.value}},{key:"resetInput",value:function(){this.value=""}}]),e}()),Q=(n(232),function(e){var t=e.file,n=e.url,a=Object(c.useState)(""),s=Object(g.a)(a,2),r=s[0],i=s[1],o=t.size>1048576?"".concat((t.size/1048576).toFixed(2)," MB"):"".concat((t.size/1024).toFixed(2)," KB");return Object(c.useEffect)((function(){var e=t.type;if("image/jpeg"===e||"image/gif"===e||"image/png"===e||"image/svg+xml"===e)if(n)i(n);else{var a=new FileReader;a.readAsDataURL(t),a.onload=function(){i("".concat(a.result))}}else i("/image/fileIcon.svg")}),[]),Object(j.jsxs)("div",{className:"file-msg",children:[Object(j.jsx)("img",{className:"file-msg__icon",src:r}),Object(j.jsxs)("div",{className:"file-msg__description",children:[Object(j.jsx)("p",{className:"file-msg__name",children:t.name}),Object(j.jsx)("p",{className:"file-msg__size",children:o})]})]})}),X=new(function(){function e(){Object(M.a)(this,e),this.file={},Object(G.d)(this)}return Object(D.a)(e,[{key:"addFile",value:function(e){this.file=e}},{key:"resetStore",value:function(){this.file={}}}]),e}()),Z=(n(233),Object(J.a)((function(e){var t=e.placeholder,n=e.onSendMsg,a=e.onLoadFile,c=e.fileLoaded;return Object(j.jsxs)("div",{className:h()("input-msg",c?"input-msg_with-file":""),children:[Object(j.jsx)(k,{children:Object(j.jsxs)("label",{className:"input-msg__clip-label",children:[Object(j.jsx)("input",{onChange:a,className:"input-msg__clip-input-file",type:"file"}),Object(j.jsx)("img",{className:"input-msg__clip-icon",src:"/image/icon/clipIcon.svg"})]})}),Object(j.jsxs)("div",{className:h()("input-msg__input",c?"input-msg__input_with-file":""),children:[Object(j.jsx)(C,{value:K.value,type:"text",onChange:function(e){return K.onChange(e)},placeholder:t,theme:"chat"}),c?Object(j.jsx)(Q,{file:X.file}):""]}),Object(j.jsx)(k,{onClick:n,children:Object(j.jsx)("img",{className:"input-msg__send-icon",src:"/image/icon/sendIcon.svg"})})]})}))),$=n.p+"static/media/arrowChatHeader.139af588.svg",ee=(n(234),function(e){var t=e.name,n=e.lastSeen,a=e.onBack,c=e.gender;return Object(j.jsxs)("div",{className:"chat-msg-header",children:[Object(j.jsx)(k,{onClick:a,theme:"arrow-chat-header-mobile",children:Object(j.jsx)("img",{src:$,alt:"back"})}),Object(j.jsx)(A,{theme:"chat-header-mobile",gender:c||"male"}),Object(j.jsxs)("div",{className:"chat-msg-header__contact",children:[Object(j.jsx)("h3",{className:"chat-msg-header__name",children:t}),Object(j.jsxs)("div",{className:"chat-msg-header__description",children:[Object(j.jsx)("p",{className:"chat-msg-header__last-seen",children:"Last seen"}),Object(j.jsx)("span",{className:"chat-msg-header__time-last-seen",children:n})]})]})]})}),te=(n(235),function(e){var t=e.name,n=e.lastSeen,a=e.gender,c=e.dialogue,s=e.loading,r=e.noContact,i=void 0!==r&&r,o=e.onBack,l=e.onSendMsg,d=e.onLoadFile,p=e.fileLoaded,m=Object(u.h)().idContact,b=function(e){return m?e.map((function(e,t){var n=e.text,a=e.your,c=e.fileData;return c?Object(j.jsxs)(Y,{yourMsg:a,children:[n,Object(j.jsx)("a",{href:c.url,children:Object(j.jsx)(Q,{file:c.file,url:c.url})})]},t):Object(j.jsx)(Y,{yourMsg:!!a,children:n},t)})):Object(j.jsx)("div",{className:"chat-message__dialogue-no-selected",children:Object(j.jsx)("p",{className:"chat-message__dialogue-no-selected-text",children:"Select a chat to stary messaging"})})}(c||[]),f=m&&!s&&Object(j.jsx)(ee,{gender:a,onBack:o,name:t,lastSeen:n}),g=m&&!s&&Object(j.jsx)(Z,{placeholder:"Write something...",onSendMsg:l,onLoadFile:d,fileLoaded:p});return Object(j.jsxs)("div",{className:"chat-message",children:[f,!i&&Object(j.jsxs)("div",{className:h()("chat-message__messages",p?"chat-message__messages_with-file":""),children:[s&&Object(j.jsx)(B,{}),!s&&b]}),g]})}),ne=new function e(){var t=this;Object(M.a)(this,e),this._apiUploadFile=void 0,this.postFile=function(){var e=Object(f.a)(b.a.mark((function e(n){var a,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append(String(0),n,n.name),e.next=4,fetch(t._apiUploadFile,{method:"POST",body:a,headers:{"Access-Control-Allow-Origin":"*"},credentials:"same-origin"});case 4:if(!(c=e.sent).ok){e.next=12;break}return e.next=8,c.text();case 8:return s=e.sent,e.abrupt("return",s);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._apiUploadFile="http://109.194.37.212:93/api/upload"},ae=(n(236),Object(J.a)((function(){var e=Object(c.useState)(!1),t=Object(g.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),r=Object(g.a)(s,2),i=r[0],o=r[1],d=Object(c.useState)(!1),p=Object(g.a)(d,2),m=p[0],O=p[1],x=Object(c.useState)(!1),_=Object(g.a)(x,2),v=_[0],N=_[1],w=Object(u.h)().idContact;Object(c.useEffect)((function(){(l=new WebSocket("ws://109.194.37.212:2346/?type=test&ws_id=".concat(localStorage.getItem("connect_key")))).onopen=function(){console.log("WS: \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e"),y()},l.onclose=function(e){e.wasClean?console.log("WS: [close] \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u043e \u0447\u0438\u0441\u0442\u043e, \u043a\u043e\u0434=".concat(e.code," \u043f\u0440\u0438\u0447\u0438\u043d\u0430=").concat(e.reason)):(console.log("WS: [close] \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0440\u0432\u0430\u043d\u043e"),alert("Lost connection"))},l.onerror=function(e){console.log("WS: [error] ".concat(e)),alert("Something went wrong")},l.onmessage=function(e){a(!1);try{var t=JSON.parse(e.data);switch(t.type){default:break;case"users_list":W.initialAllUsers(t.data);break;case"user_joined_info":C()}}catch(n){console.log(n)}}}),[]);var C=function(){var e=JSON.stringify({type:"users_list"});try{l.send(e),console.log("send: ",e)}catch(t){console.log(t)}},y=function(){a(!0),C()},S=function(){o(!i)},k=function(){var e=Object(f.a)(b.a.mark((function e(){var t,n,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=20;break}if(!m){e.next=15;break}return N(!0),O(!1),t=Object(G.h)(X.file),n=Object(G.h)(K.value),e.next=8,ne.postFile(t);case 8:a=e.sent,l.send(n),a?W.saveMessage({text:n,your:!0,fileData:{file:t,url:"http://109.194.37.212:93".concat(a)}},w):alert("Error loading file"),K.resetInput(),X.resetStore(),e.next=18;break;case 15:N(!0),(c=Object(G.h)(K.value))&&(W.saveMessage({text:c,your:!0},w),l.send(c),K.resetInput());case 18:e.next=21;break;case 20:alert("Wait for the message to be sent");case 21:N(!1);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){var t=e.target.files;if(t){var n=t[0].type;"video/mp4"===n||"video/ogg"===n||"video/webm"===n||"audio/mpeg"===n||"audio/ogg"===n||"image/jpeg"===n||"image/gif"===n||"image/png"===n||"image/svg+xml"===n?t[0].size<2097152?(X.addFile(t[0]),O(!0)):alert("The file must be no more than 2 MB"):alert("Invalid file format")}e.target.value=""},F=function(e){var t=Object(G.h)(W.allUsers);if(n)return Object(j.jsx)(te,{loading:!0});if(!(t.length&&t[0].name&&t[0].gender))return Object(j.jsx)(te,{noContact:!0});if(e){var a=t.find((function(t){return t.id===e})),c=a.name,s=a.dialogue,r=a.gender;return Object(j.jsx)(te,{onBack:S,name:c,gender:r,dialogue:s,loading:n,onSendMsg:k,onLoadFile:I,fileLoaded:m})}return Object(j.jsx)(te,{})}(w);return Object(j.jsxs)("div",{className:"chat",children:[Object(j.jsx)(V,{focusChat:i}),Object(j.jsxs)("div",{className:h()("chat__content",i?"chat__content_focus-chat":""),children:[Object(j.jsx)(z,{onClick:S,loading:n}),F]})]})}))),ce=n(3),se=n(104),re=n.p+"static/media/arrowSelector.6d3f84ad.svg",ie=(n(237),{option:function(e,t){return Object(N.a)(Object(N.a)({},e),{},{padding:16})},menu:function(e){return Object(N.a)(Object(N.a)({},e),{},{width:"calc(50% - 9px)"})},control:function(){return{display:"flex",border:"1px solid #B3CDF8",borderRadius:"8px",height:"54px",width:"calc(50% - 12px)"}},singleValue:function(e,t){var n=t.isDisabled?.5:1;return Object(N.a)(Object(N.a)({},e),{},{opacity:n,transition:"opacity 300ms"})},placeholder:function(e){return Object(N.a)(Object(N.a)({},e),{},{text:"Your gender",color:"#9F9F9F",fontFamily:"Montserrat",fontWeight:400,fontSize:"15px",lineHeight:"23px",paddingLeft:0,marginLeft:0})},valueContainer:function(e){return Object(N.a)(Object(N.a)({},e),{},{paddingLeft:"16px"})},indicatorSeparator:function(){return{display:"none"}}}),oe=function(e){return Object(j.jsx)(ce.p.DropdownIndicator,Object(N.a)(Object(N.a)({},e),{},{children:Object(j.jsx)("img",{src:re})}))},le=function(e){var t=e.description,n=e.genders,a=e.name,c=e.onChange,s=n.map((function(e){return{value:e.gender_id,label:e.gender}}));return Object(j.jsxs)("div",{className:"select-gender",children:[Object(j.jsx)("span",{className:"select-gender__description",children:t}),Object(j.jsx)(se.a,{onChange:c,options:s,styles:ie,components:{DropdownIndicator:oe},name:a})]})},ue=function(){function e(){Object(M.a)(this,e),this.gender=[{gender:"Male",gender_id:1},{gender:"Female",gender_id:2}],Object(G.d)(this)}return Object(D.a)(e,[{key:"getGender",value:function(){var e=Object(f.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://109.194.37.212:93/api/auth");case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:n=e.sent,this.gender=n.genders.map((function(e){return{gender:e.gender,gender_id:e.id}}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),de=new ue,he=(n(252),Object(J.a)((function(){var e=Object(u.g)(),t=Object(c.useState)(!1),n=Object(g.a)(t,2),s=n[0],r=n[1],i=Object(c.useState)(!1),o=Object(g.a)(i,2),l=o[0],d=o[1],h=Object(c.useState)(""),p=Object(g.a)(h,2),m=p[0],x=p[1];Object(c.useEffect)((function(){de.getGender(),w()}),[]);var _=Object(O.a)({initialValues:{login:"",password:"",password_confirm:"",name:"",gender_id:0,captcha:""},onSubmit:function(){var t=Object(f.a)(b.a.mark((function t(n){var c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),d(!0),t.next=4,L.postSignUp(n);case 4:if(!(c=t.sent)){t.next=8;break}return e.push(a.SCREEN_LOGIN),t.abrupt("return");case 8:d(!1),r(!c),alert("Something went wrong"),w();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),validationSchema:v}),N=function(e){_.handleChange(e),r(!1)},w=function(){var e=Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(""),e.next=3,R.update();case 3:t=e.sent,x(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"form-signup",children:Object(j.jsxs)("form",{className:"form-signup__form",onSubmit:_.handleSubmit,children:[Object(j.jsxs)("div",{className:"form-signup__inputs",children:[Object(j.jsx)(S,{onChange:N,inValidInput:_.touched.login&&Boolean(_.errors.login),value:_.values.login,name:"login",description:"Create user name",placeholder:"Input user name",type:"text",errorText:_.errors.login}),Object(j.jsx)(S,{onChange:N,inValidInput:_.touched.password&&Boolean(_.errors.password),value:_.values.password,name:"password",description:"Create password",placeholder:"Input password",type:"password",errorText:_.errors.password}),Object(j.jsx)(S,{onChange:N,inValidInput:_.touched.password_confirm&&Boolean(_.errors.password_confirm),value:_.values.password_confirm,name:"password_confirm",description:"Password confirmation",placeholder:"Password confirmation",type:"password",errorText:_.errors.password_confirm}),Object(j.jsx)(S,{onChange:N,inValidInput:_.touched.name&&Boolean(_.errors.name),value:_.values.name,name:"name",description:"Nickname",placeholder:"Nickname",type:"text",errorText:_.errors.name}),Object(j.jsx)(le,{description:"Your gender",onChange:function(e){_.setFieldValue("gender_id",e.value),r(!1)},genders:de.gender}),Object(j.jsx)("div",{className:"form-signup__security-code",children:Object(j.jsx)(T,{onChange:N,onClick:w,inValidInput:_.touched.captcha&&Boolean(_.errors.captcha),value:_.values.captcha,name:"captcha",theme:"last-input",description:"Security code",placeholder:"Security code",type:"text",errorText:_.errors.captcha,src:m})})]}),Object(j.jsxs)("div",{className:"form-signup__buttons",children:[Object(j.jsx)(k,{disabled:s,theme:"submit-auth",type:"submit",children:"Registration"}),Object(j.jsx)(k,{onClick:function(){e.push(a.SCREEN_LOGIN)},theme:"nav-auth",type:"button",children:"Log in"})]}),l?Object(j.jsx)(B,{}):""]})})}))),je=(n(253),function(){return Object(j.jsxs)("div",{className:"signup",children:[Object(j.jsx)("div",{className:"signup__left",children:Object(j.jsxs)("div",{className:"signup__left-content",children:[Object(j.jsxs)("div",{className:"signup__header",children:[Object(j.jsx)(p,{theme:"signup"}),Object(j.jsxs)("h1",{className:"signup__header-title",children:["Sign Up to ",Object(j.jsx)("span",{className:"_color-blue",children:"Chatty"}),Object(j.jsx)("span",{className:"_color-light-blue",children:"!"})]}),Object(j.jsx)("h2",{className:"signup__header-description",children:"Registration"})]}),Object(j.jsx)(he,{})]})}),Object(j.jsx)("div",{className:"signup__right"})]})}),pe=function(){return Object(j.jsxs)(u.d,{children:[Object(j.jsx)(u.b,{path:a.SCREEN_LOGIN,exact:!0,children:Object(j.jsx)(q,{})}),Object(j.jsx)(u.b,{path:a.SCREEN_SIGNUP,exact:!0,children:Object(j.jsx)(je,{})}),Object(j.jsx)(u.b,{path:["".concat(a.SCREEN_CHAT,"/:idContact"),a.SCREEN_CHAT],children:Object(j.jsx)(ae,{})}),Object(j.jsx)(u.a,{to:a.SCREEN_LOGIN})]})},me=function(){return Object(j.jsx)(o.a,{children:Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(pe,{})})})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,255)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};i.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(me,{})}),document.getElementById("root")),be()}},[[254,1,2]]]);
//# sourceMappingURL=main.843faa0c.chunk.js.map